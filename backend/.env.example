# ============================================
# Habit Tracker Backend - Environment Variables
# ============================================
# Copy this file to .env and update values for your environment

# --------------------------------------------
# Server Configuration
# --------------------------------------------
PORT=8080
NODE_ENV=development
# Options: development, production, test

# --------------------------------------------
# Database Configuration
# --------------------------------------------
# Development (Docker):
DATABASE_URL="postgresql://postgres:postgres@postgres:5432/habit_tracker"

# Production - Use SSL connection:
# DATABASE_URL="postgresql://user:password@host:5432/database?sslmode=require"
# For Railway/Render, the DATABASE_URL will be provided automatically

# --------------------------------------------
# JWT Authentication
# --------------------------------------------
# IMPORTANT: Generate a secure secret for production!
# Run: openssl rand -base64 48
# The secret MUST be at least 32 characters long
JWT_SECRET=your-secret-key-change-in-production

# Access token expiry (short-lived for security)
JWT_EXPIRES_IN=15m

# Refresh token expiry (longer-lived, stored in HTTP-only cookie)
REFRESH_TOKEN_EXPIRES_IN=7d

# --------------------------------------------
# CORS Configuration
# --------------------------------------------
# Single origin:
CORS_ORIGIN=http://localhost:3000

# Multiple origins (comma-separated):
# CORS_ORIGIN=http://localhost:3000,https://your-app.railway.app,https://yourdomain.com

# --------------------------------------------
# Telegram Integration (Optional)
# --------------------------------------------
# To enable Telegram notifications, create a bot via @BotFather
# See docs/TELEGRAM_INTEGRATION.md for detailed setup instructions
TELEGRAM_BOT_TOKEN=

# Example token format: 123456789:ABCdefGHIjklMNOpqrsTUVwxyz
# Leave empty to disable Telegram notifications

# --------------------------------------------
# Redis Configuration (Optional)
# --------------------------------------------
# Redis is used for caching and rate limiting.
# If not set, the app falls back to in-memory storage.
REDIS_URL=redis://localhost:6379

# Production (Upstash or Redis Cloud with TLS):
# REDIS_URL=rediss://default:xxxxx@host:6379

# --------------------------------------------
# Demo User Seeder (Optional)
# --------------------------------------------
# Set to enable daily automatic data seeding for a demo user.
# The cron job runs at 00:05 UTC and adds realistic daily activity.
# Leave empty to disable.
DEMO_USER_EMAIL=test@example.com

# --------------------------------------------
# Deployment Info (auto-injected in CI/Docker, optional locally)
# --------------------------------------------
GIT_SHA=
BUILD_TIMESTAMP=
DOCKER_IMAGE=

# --------------------------------------------
# Production Checklist
# --------------------------------------------
# 1. Set NODE_ENV=production
# 2. Generate strong JWT_SECRET (min 32 chars): openssl rand -base64 48
# 3. Use SSL database connection (?sslmode=require)
# 4. Configure proper CORS_ORIGIN for your domains
# 5. Set up proper logging and monitoring
# 6. Enable rate limiting (already configured in code)

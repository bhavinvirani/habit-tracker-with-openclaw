paths:
  /auth/register:
    post:
      tags: [Authentication]
      summary: Register a new user
      description: Creates a new user account with the provided email, password, and name. Returns access and refresh tokens on success.
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
                - name
              properties:
                email:
                  type: string
                  format: email
                  maxLength: 255
                  example: user@example.com
                password:
                  type: string
                  minLength: 8
                  maxLength: 100
                  example: securePassword123
                name:
                  type: string
                  minLength: 1
                  maxLength: 100
                  example: John Doe
      responses:
        200:
          description: User registered successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      user:
                        type: object
                        properties:
                          id:
                            type: string
                          email:
                            type: string
                          name:
                            type: string
                      accessToken:
                        type: string
        400:
          description: Validation error or email already in use
        429:
          description: Too many requests - rate limit exceeded

  /auth/login:
    post:
      tags: [Authentication]
      summary: Log in a user
      description: Authenticates a user with email and password. Returns an access token in the response body and sets a refresh token as an httpOnly cookie.
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
              properties:
                email:
                  type: string
                  format: email
                  example: user@example.com
                password:
                  type: string
                  minLength: 1
                  example: securePassword123
      responses:
        200:
          description: Login successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      user:
                        type: object
                        properties:
                          id:
                            type: string
                          email:
                            type: string
                          name:
                            type: string
                      accessToken:
                        type: string
          headers:
            Set-Cookie:
              description: Refresh token set as httpOnly cookie
              schema:
                type: string
        400:
          description: Validation error
        401:
          description: Invalid email or password
        429:
          description: Too many requests - rate limit exceeded

  /auth/refresh:
    post:
      tags: [Authentication]
      summary: Refresh access token
      description: Uses the refresh token from the httpOnly cookie to issue a new access token and rotate the refresh token. The old refresh token is invalidated.
      security: []
      responses:
        200:
          description: Token refreshed successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      accessToken:
                        type: string
          headers:
            Set-Cookie:
              description: New refresh token set as httpOnly cookie
              schema:
                type: string
        401:
          description: Invalid or expired refresh token

  /auth/logout:
    post:
      tags: [Authentication]
      summary: Log out the current user
      description: Invalidates the user's refresh token and clears the refresh token cookie. Requires a valid access token.
      security:
        - bearerAuth: []
      responses:
        200:
          description: Logged out successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      message:
                        type: string
                        example: Logged out successfully
        401:
          description: Not authenticated - missing or invalid access token

  /auth/me:
    get:
      tags: [Authentication]
      summary: Get current user profile
      description: Returns the profile information of the currently authenticated user.
      security:
        - bearerAuth: []
      responses:
        200:
          description: Current user profile
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      user:
                        type: object
                        properties:
                          id:
                            type: string
                          email:
                            type: string
                          name:
                            type: string
                          createdAt:
                            type: string
                            format: date-time
        401:
          description: Not authenticated - missing or invalid access token
